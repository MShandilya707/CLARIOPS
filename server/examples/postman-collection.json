{
  "info": {
    "name": "ClariOps API - LLM-WhatsApp Integration",
    "description": "Collection for testing ClariOps API endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3001/api/health",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3001",
          "path": ["api", "health"]
        },
        "description": "Check if the API server is running"
      }
    },
    {
      "name": "Generate LLM Response",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"message\": \"What are your pricing plans?\",\n  \"conversationId\": \"test_123\",\n  \"context\": {\n    \"previousMessages\": []\n  }\n}"
        },
        "url": {
          "raw": "http://localhost:3001/api/generate-response",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3001",
          "path": ["api", "generate-response"]
        },
        "description": "Test LLM response generation"
      }
    },
    {
      "name": "Send WhatsApp Message",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"phoneNumber\": \"1234567890\",\n  \"message\": \"Hello from ClariOps!\"\n}"
        },
        "url": {
          "raw": "http://localhost:3001/api/send-message",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3001",
          "path": ["api", "send-message"]
        },
        "description": "Send a WhatsApp message programmatically"
      }
    },
    {
      "name": "Get Session",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3001/api/session/1234567890",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3001",
          "path": ["api", "session", "1234567890"]
        },
        "description": "Get conversation session data for a phone number"
      }
    },
    {
      "name": "WhatsApp Webhook (Verify)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3001/webhook?hub.mode=subscribe&hub.verify_token=your_verify_token&hub.challenge=test_challenge",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3001",
          "path": ["webhook"],
          "query": [
            {
              "key": "hub.mode",
              "value": "subscribe"
            },
            {
              "key": "hub.verify_token",
              "value": "your_verify_token"
            },
            {
              "key": "hub.challenge",
              "value": "test_challenge"
            }
          ]
        },
        "description": "Test webhook verification endpoint"
      }
    },
    {
      "name": "WhatsApp Webhook (Incoming Message)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"object\": \"whatsapp_business_account\",\n  \"entry\": [\n    {\n      \"id\": \"123456789\",\n      \"changes\": [\n        {\n          \"value\": {\n            \"messaging_product\": \"whatsapp\",\n            \"metadata\": {\n              \"display_phone_number\": \"1234567890\",\n              \"phone_number_id\": \"123456789\"\n            },\n            \"contacts\": [\n              {\n                \"profile\": {\n                  \"name\": \"John Doe\"\n                },\n                \"wa_id\": \"1234567890\"\n              }\n            ],\n            \"messages\": [\n              {\n                \"from\": \"1234567890\",\n                \"id\": \"wamid.123456789\",\n                \"timestamp\": \"1642425999\",\n                \"text\": {\n                  \"body\": \"Hello, I need help with my account\"\n                },\n                \"type\": \"text\"\n              }\n            ]\n          },\n          \"field\": \"messages\"\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "http://localhost:3001/webhook",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3001",
          "path": ["webhook"]
        },
        "description": "Test incoming WhatsApp message webhook"
      }
    }
  ]
}
